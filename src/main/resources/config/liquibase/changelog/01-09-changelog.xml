<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd
                        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

  <changeSet id="1756753261184-1" author="halimzaaim">
    <createTable tableName="employee_process">
      <column name="id" type="${uuidType}">
        <constraints nullable="false" primaryKey="true" primaryKeyName="pk_employee_process"/>
      </column>
      <column name="employee_id" type="${uuidType}">
        <constraints nullable="false"/>
      </column>
      <column name="process_type" type="VARCHAR(255)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="VARCHAR(255)">
        <constraints nullable="false"/>
      </column>
      <column name="start_date" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="due_date" type="DATE"/>
      <column name="completion_date" type="DATE"/>
      <column name="notes" type="VARCHAR(2000)"/>
      <column name="created_by" type="VARCHAR(50)">
        <constraints nullable="false"/>
      </column>
      <column name="created_date" type="DATETIME"/>
      <column name="last_modified_by" type="VARCHAR(50)"/>
      <column name="last_modified_date" type="DATETIME"/>
    </createTable>
  </changeSet>
  <changeSet id="1756753261184-2" author="halimzaaim">
    <createTable tableName="employee_process_task">
      <column name="id" type="${uuidType}">
        <constraints nullable="false" primaryKey="true" primaryKeyName="pk_employee_process_task"/>
      </column>
      <column name="process_id" type="${uuidType}">
        <constraints nullable="false"/>
      </column>
      <column name="title" type="VARCHAR(255)">
        <constraints nullable="false"/>
      </column>
      <column name="description" type="VARCHAR(1000)"/>
      <column name="due_date" type="DATE"/>
      <column name="completion_date" type="DATE"/>
      <column name="is_completed" type="BOOLEAN">
        <constraints nullable="false"/>
      </column>
      <column name="assigned_to_id" type="${uuidType}"/>
      <column name="completion_notes" type="VARCHAR(1000)"/>
      <column name="created_by" type="VARCHAR(50)">
        <constraints nullable="false"/>
      </column>
      <column name="created_date" type="DATETIME"/>
      <column name="last_modified_by" type="VARCHAR(50)"/>
      <column name="last_modified_date" type="DATETIME"/>
    </createTable>
  </changeSet>
  <changeSet id="1756753261184-3" author="halimzaaim">
    <addForeignKeyConstraint baseColumnNames="employee_id" baseTableName="employee_process"
                             constraintName="FK_EMPLOYEE_PROCESS_ON_EMPLOYEE" referencedColumnNames="id"
                             referencedTableName="employee"/>
  </changeSet>
  <changeSet id="1756753261184-4" author="halimzaaim">
    <addForeignKeyConstraint baseColumnNames="assigned_to_id" baseTableName="employee_process_task"
                             constraintName="FK_EMPLOYEE_PROCESS_TASK_ON_ASSIGNED_TO" referencedColumnNames="id"
                             referencedTableName="employee"/>
  </changeSet>
  <changeSet id="1756753261184-5" author="halimzaaim">
    <addForeignKeyConstraint baseColumnNames="process_id" baseTableName="employee_process_task"
                             constraintName="FK_EMPLOYEE_PROCESS_TASK_ON_PROCESS" referencedColumnNames="id"
                             referencedTableName="employee_process"/>
  </changeSet>

</databaseChangeLog>
